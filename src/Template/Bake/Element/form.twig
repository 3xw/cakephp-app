{#
/**
 * template 3xW v.3.5.5
#}
{% set fields = Bake.filterFields(fields, schema, modelObject) %}
<nav class="navbar navbar-expand-lg">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
          <?= $this->Html->link('<i class="material-icons">list</i> '.__('List'),['action'=>'index'], ['class' => '','escape'=>false]) ?>
      </li>
    </ul>
  </div>
</nav>
<div class="utils--spacer-default"></div>
<div class="row no-gutters">
  <div class="col-11 mx-auto">
    <div class="card">
      <div class="card-header">
        <h2><?= __('{{ action|humanize }} {{ singularHumanName }}') ?></h2>
      </div>
      <div class="card-body">
        <?= $this->Form->create(${{ singularVar }}) ?>
        <?php
        {% for field in fields if field not in primaryKey %}
            {%- if keyFields[field] %}
                {%- set fieldData = Bake.columnData(field, schema) %}
                {%- if fieldData.null %}
                    echo $this->Form->control('{{ field }}', ['options' => ${{ keyFields[field] }}, 'empty' => true, 'class'=>'form-control']);
                    {{- "\n" }}
                {%- else %}
                    echo $this->Form->control('{{ field }}', ['options' => ${{ keyFields[field] }}, 'class'=>'form-control']);
                    {{- "\n" }}
                {%- endif %}
            {%- elseif field not in ['created', 'modified', 'updated'] %}
                {%- set fieldData = Bake.columnData(field, schema) %}
                {%- if fieldData.type in ['date', 'datetime', 'time'] and fieldData.null %}
                    echo $this->Form->control('{{ field }}', ['empty' => true, 'class'=>'form-control']);
                    {{- "\n" }}
                {%- else %}
                    echo $this->Form->control('{{ field }}',['class'=>'form-control']);
            {{- "\n" }}
                {%- endif %}
            {%- endif %}
        {%- endfor %}

        {%- if associations.BelongsToMany %}
            {%- for assocName, assocData in associations.BelongsToMany %}
                    echo $this->Form->control('{{ assocData.property }}._ids', ['options' => ${{ assocData.variable }}, 'class'=>'form-control']);
            {{- "\n" }}
            {%- endfor %}
        {% endif %}

      ?>
      <div class="text-right">
        <div class="btn-group">
          <?= $this->Html->link(__('Cancel'), $referer, ['class' => 'btn btn-danger btn-fill']) ?>
          <?= $this->Form->button(__('Submit'), ['class' => 'btn btn-info btn-fill']) ?>
        </div>
      </div>
      <?= $this->Form->end() ?>
      </div>

  </div>
</div>
</div>
<div class="utils--spacer-default"></div>
